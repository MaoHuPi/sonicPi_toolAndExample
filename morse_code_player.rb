##| Morse Code Player
##| 2023 (c) MaoHuPi
##| Sonic Pi Project
##| 1.0.0

message = 'This is morse code sound.'
length = 0.08
peach = hz_to_midi(800)
waveType = :blade
volume = 0.2

dahLength = length*3
ditLength = length*1
gapLength = length*1

morseCode = ''
for char in message.downcase.split('')
  code = {
    ' ' => ' ',
    'a' => '.-',
    'b' => '-...',
    'c' => '-.-.',
    'd' => '-..',
    'e' => '.',
    'f' => '..-.',
    'g' => '--.',
    'h' => '....',
    'i' => '..',
    'j' => '.---',
    'k' => '-.-',
    'l' => '.-..',
    'm' => '--',
    'n' => '-.',
    'o' => '---',
    'p' => '.--.',
    'q' => '--.-',
    'r' => '.-.',
    's' => '...',
    't' => '-',
    'u' => '..-',
    'v' => '...-',
    'w' => '.--',
    'x' => '-..-',
    'y' => '-.--',
    'z' => '--..',
    '0' => '-----',
    '1' => '.----',
    '2' => '..---',
    '3' => '...--',
    '4' => '....-',
    '5' => '.....',
    '6' => '-....',
    '7' => '--...',
    '8' => '---..',
    '9' => '----.',
    '.' => '.-.-.-',
    ':' => '---...',
    ', ' => '--..--',
    ';' => '-.-.-.',
    '?' => '..--..',
    '=' => '-...-',
    '\'' => '.----.',
    '/' => '-..-.',
    '!' => '-.-.--',
    '-' => '-....-',
    '_' => '..--.-',
    '\'' => '.-..-.',
    '(' => '-.--.',
    ')' => '-.--.-',
    '$' => '...-..-',
    '&' => '.-...',
    '@' => '.--.-.',
    '+' => '.-.-.',
    'ä' => '·-·-',
    'æ' => '·-·-',
    'ą' => '·-·-',
    'à' => '·--·-',
    'å' => '·--·-',
    'ç' => '-·-··',
    'ĉ' => '-·-··',
    'ć' => '-·-··',
    'č' => '·--·',
    'ch' => '----', ##| ?
    'š' => '----',
    'ĥ' => '----',
    'ð' => '··--·',
    'è' => '·-··-',
    'è' => '·-··-',
    'é' => '··-··',
    'đ' => '··-··',
    'ę' => '··-··',
    'ĝ' => '--·-·',
    'ĥ' => '-·--·',
    'ĵ' => '·---·',
    'ñ' => '--·--',
    'ń' => '--·--',
    'ö' => '---·',
    'ø' => '---·',
    'ó' => '---·',
    'ś' => '···-···',
    'ŝ' => '···-·',
    'ß' => '···--··',
    'þ' => '·--··',
    'ü' => '··--',
    'ŭ' => '··--',
    'ź' => '--··-·',
    'ž' => '·--',
    'ż' => '--··-'
  }
  morseCode += code[char] + ' '
end

print morseCode

for char in morseCode.split('')
  print char
  if char == '-'
    synth waveType, note: peach, release: dahLength, amp: volume
    sleep dahLength
  elsif char == '.'
    synth waveType, note: peach, release: ditLength, amp: volume
    sleep ditLength
  else
    sleep gapLength
  end
  sleep ditLength
end
